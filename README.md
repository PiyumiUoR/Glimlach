# Glimlach Docker Image Runner

## Overview

The Glimlach Docker Image Runner is a Python script (`cli.py`) designed to automate the execution of Docker images based on a provided JSON configuration file. This script is particularly useful for running multiple Docker images with different configurations concurrently.

## Features

- **Parallel Execution**: Execute Docker images concurrently, enhancing overall performance.
- **Configuration File**: Manage Docker images and their configurations using a JSON configuration file.
- **Placeholder Replacement**: Support dynamic configuration by replacing placeholders in the configuration file with actual values.
- **Logging**: Provide informative logging at different levels (INFO, ERROR) to track progress and identify issues during execution.
- **Persistence**: Track completed Docker images to prevent redundant executions.

## Usage

1. Clone the repository:

    ```bash
    git clone https://github.com/your-username/glimlach-docker-runner.git
    cd glimlach-docker-runner
    ```

2. Install dependencies:

    ```bash
    pip install -r requirements.txt
    ```

3. Execute the script:

    ```bash
    python cli.py config.json
    ```

## Configuration File

The configuration file (`config.json`) includes the following sections:

- **values**: Key-value pairs for replacing placeholders in the configuration file.
  
- **images**: An array of Docker image configurations, each including the Docker image ID, command line arguments, and other necessary details.

- **output-directory**: The directory where output files generated by Docker images will be stored.

## Placeholder Replacement

Make the configuration file dynamic by using placeholders enclosed in `< >` brackets. Corresponding values are provided in the `values` section of the configuration file.

In the provided configuration file example:

- `<ip>` is replaced with the value `192.168.101.1`.
- `<out_dir>` is replaced with the value `/Users/your-username/Desktop/`.
- `<web>` is replaced with the value `https://example.com`.

## Logging

The script uses Python's logging module to provide detailed information about the execution process. Information is logged at the INFO level, while errors are logged at the ERROR level.

## Notes and Considerations

- **Completed Images Tracking**: The script maintains a file (`completed_images.txt`) to track completed Docker images, preventing unnecessary re-execution.
- **Dependency**: Ensure that Docker is installed and available in the system's PATH.
- **Concurrency**: The script leverages multiprocessing to run Docker images concurrently. Adjust the number of processes based on system capabilities.

## License

This project is licensed under the [MIT License](LICENSE).

